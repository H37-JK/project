from uuid import UUIDfrom fastapi import APIRouter, Depends, HTTPExceptionfrom sqlmodel import selectfrom typing import Annotatedfrom backend.model.user import Userfrom backend.passlib.jwt_token import get_current_userfrom backend.db.engine import SessionDepfrom backend.logs.logging_route import LoggingRoutefrom backend.model.api.api_request_history import ApiRequestHistoryrouter = APIRouter (    tags = ["api-request-history"],    responses = {404: {"description": "잘못된 경로 입니다."}},    route_class = LoggingRoute,)@router.get("/get/api-requests-histories")async def get_api_request_histories (    session: SessionDep,    current_user: Annotated[User, Depends(get_current_user)]):    return session.exec(select(ApiRequestHistory).where(ApiRequestHistory.user_id == current_user.id)).all()@router.get("/get/api-request-history/{id}")async def get_api_request_history (    session: SessionDep,    current_user: Annotated[User, Depends(get_current_user)],    id: int):    return session.exec(select(ApiRequestHistory).where(ApiRequestHistory.id == id, ApiRequestHistory.user_id == current_user.id)).one_or_none()@router.delete("/delete/api-request-history/{id}")async def delete_api_request_history (    session: SessionDep,    current_user: Annotated[User, Depends(get_current_user)],    id: UUID):    api_request_history = session.exec(select(ApiRequestHistory).where(ApiRequestHistory.user_id == current_user.id, ApiRequestHistory.id == id)).one_or_none()    if not api_request_history:        raise HTTPException(status_code = 404, detail = "존재하지 않는 API 이력 입니다.")    session.delete(api_request_history)    session.commit()    return True